===== Operations [[low-cut-ethernet-operations]]

This section defines the specified operations for Ethernet.
The following tables provide an overview of all operations and specifies the position and length of the corresponding arguments, as well as the respective flow direction.


====== Format Error [[low-cut-ethernet-format-error-operation]]
Represents a format error that indicates a syntax or content error of receiving operations.
See <<low-cut-format-error-operation, `Format Error`>> for definition.


====== Transmit [[low-cut-ethernet-transmit]]
Represents the transmission of an Ethernet frame or MAC Merge Packet (mPacket).

.Detailed description of the Transmit operation.
[#table-fmi3-ls-bus-ethernet-transmit-operation]
[cols="6,1,5,4,3,20"]
|====
h|Name 5+| Transmit
h|Description 5+| Indicates the transmission of an Ethernet frame or mPacket.
h|OP Code [hex] 5+| 0x10
.21+h|Content 3+h|Argument h|Length h|Description


3+| OP Code
| 4 bytes
| Type of the operation.

3+| Length
| 4 bytes
| Total length of the operation.
The following applies for this operation: `Length = 28 + n`.


3+| Start delimiter
| 1 byte
| The start frame (SFD) or start mPacket (SMD) delimiter. Always set to 0xD5 for ordinary Ethernet frames when not using preemption.

3+| Destination address
| 6 bytes
| The destination address of the frame.

3+| Source address
| 6 bytes
| The destination address of the frame.

3+| EtherType or length
| 2 bytes
| Indicates the type of Ethernet frame (Ethernet II) or frame length (802.3).

3+| CRC
| 4 bytes
| The checksum of this Ethernet frame or mPacket.

3+| Data length
| 1 byte
| The length of the data of this Ethernet frame or mPacket. Note that this does not correspond to a field in the Ethernet frame.

3+| Data
| n bytes
| The payload data of the Ethernet frame or mPacket.

|====


====== Transmit verify/respond [[low-cut-ethernet-transmit-verify-respond-operation]]
Represents the transmission of a verify or response mPacket.

.Detailed description of the Transmit verify/respond operation.
[#table-fmi3-ls-bus-ethernet-transmit-verify-respond-operation]
[cols="6,1,5,4,3,20"]
|====
h|Name 5+| Transmit Verify/Respond
h|Description 5+| Indicates the transmission of a verify or respond mPacket.
h|OP Code [hex] 5+| 0x11
.21+h|Content 3+h|Argument h|Length h|Description


3+| OP Code
| 4 bytes
| Type of the operation.

3+| Length
| 4 bytes
| Total length of the operation.
The following applies for this operation: `Length = 14 + n`.


3+| Start delimiter
| 1 byte
| The delimiter indicating the type of mPacket.

3+| CRC
| 4 bytes
| The checksum of the mPacket.

3+| Data length
| 1 byte
| The length of the data of this mPacket. Note that this does not correspond to a field in the Ethernet frame.

3+| Data
| n bytes
| The payload data of the Ethernet mPacket.

|====


====== Transmit continuation [[low-cut-ethernet-transmit-continuation-operation]]
Represents the transmission of a continuation mPacket.

.Detailed description of the Transmit continuation operation.
[#table-fmi3-ls-bus-ethernet-transmit-continuation-operation]
[cols="6,1,5,4,3,20"]
|====
h|Name 5+| Transmit Continuation
h|Description 5+| Indicates the transmission of a continuation mPacket of a fragmented Ethernet frame.
h|OP Code [hex] 5+| 0x12
.21+h|Content 3+h|Argument h|Length h|Description


3+| OP Code
| 4 bytes
| Type of the operation.

3+| Length
| 4 bytes
| Total length of the operation.
The following applies for this operation: `Length = 15 + n`.


3+| Start delimiter
| 1 byte
| The delimiter indicating the type of mPacket.

3+| Fragment counter
| 1 byte
| Fragment counter of the continuation mPacket.

3+| CRC
| 4 bytes
| The checksum of the mPacket.

3+| Data length
| 1 byte
| The length of the data of this mPacket. Note that this does not correspond to a field in the Ethernet frame.

3+| Data
| n bytes
| The payload data of the Ethernet mPacket.

|====


====== Confirm [[low-cut-ethernet-confirm-operation]]
The <<low-cut-ethernet-confirm-operation, `Confirm`>> operation is used to indicate the successful transmission of an Ethernet frame by a Network FMU.

.Detailed description of the Confirm operation.
[#table-fmi3-ls-bus-ethernet-confirm-operation]
[cols="6,1,5,4,3,20"]
|====
h|Name 5+| Confirm
h|Description 5+| Indicates the successful transmission of an Ethernet frame.
h|OP Code [hex] 5+| 0x15
.21+h|Content 3+h|Argument h|Length h|Description


3+| OP Code
| 4 bytes
| Type of the operation.

3+| Length
| 4 bytes
| Total length of the operation.
The following applies for this operation: `Length = 8`.


|====

====== Bus Error [[low-cut-ethernet-bus-error-operation]]
The <<low-cut-ethernet-bus-error-operation, `Bus Error`>> operation is used to indicate a bus communication error. Bus errors are delivered to every participant in the network.

.Detailed description of the Bus Error operation.
[#table-fmi3-ls-bus-ethernet-bus-error-operation]
[cols="6,1,5,4,3,20"]
|====
h|Name 5+| Bus Error
h|Description 5+| Indicates an error during the transmission of an Ethernet frame. TODO. To be defined.
h|OP Code [hex] 5+| 0x16
.21+h|Content 3+h|Argument h|Length h|Description


3+| OP Code
| 4 bytes
| Type of the operation.

3+| Length
| 4 bytes
| Total length of the operation.
The following applies for this operation: `Length = 10`.


3+| Error code
| 1 byte
| The error code.

3+| Is Sender
| 1 byte
| Indicates whether this bus error occurs in response to a transmission of this FMU.

|====

.Valid values for the bus error code.
[#table-fmi3-ls-bus-ethernet-bus-error-code-values]
[cols="2,1,5"]
|====

h|Name h|Value h|Description
|[[table-fmi3-ls-bus-ethernet-bus-error-code-values-unknown]]UNKNOWN|0x0|Unknown error. TODO.
|[[table-fmi3-ls-bus-ethernet-bus-error-code-values-medium-busy]]MEDIUM_BUSY|0x1|The medium is currently busy.
|[[table-fmi3-ls-bus-ethernet-bus-error-code-values-collision]]COLLISION|0x2|A frame collided during transmission.

|====


====== Configuration [[low-cut-ethernet-configuration-operation]]
Represents the transmission of a continuation mPacket.

.Detailed description of the Configuration operation.
[#table-fmi3-ls-bus-ethernet-configuration-operation]
[cols="6,1,5,4,3,20"]
|====
h|Name 5+| Configuration
h|Description 5+| Provides information to configure the Ethernet bus.
h|OP Code [hex] 5+| 0x20
.21+h|Content 3+h|Argument h|Length h|Description


3+| OP Code
| 4 bytes
| Type of the operation.

3+| Length
| 4 bytes
| Total length of the operation.
The following applies for this operation: `Length = 9 + ...`.


3+| Parameter Type
| 1 byte
| Defines the current configuration parameter.

.17+h|
4+h|Parameter

.16+|SUPPORTED_PHY_TYPES
| MDI Mode
| 1 bytes
| The configuration of the node's media-dependent interface.

| Number of supported PHY types
| 1 bytes
| The number of characters in the list of supported PHY types.

| Supported PHY types
| 1 bytes
| An array of zero-terminated strings describing PHY types supported by this Ethernet node. The first element in this list indicates the type of PHY used by this node. The list must have at least one element. Elements describing a PHY standarized by 802.3 or an amendment must use the value described in the chapter "30.3.2.1.2 aPhyType" of the standard. Otherwise, a vendor-defined value may be used.



|====


.Valid values for the configuration parameter type.
[#table-fmi3-ls-bus-ethernet-config-parameter-type-values]
[cols="2,1,5"]
|====

h|Name h|Value h|Description
|[[table-fmi3-ls-bus-ethernet-config-parameter-type-values-supported-phy-types]]SUPPORTED_PHY_TYPES|0x0|Indicates the supported Ethernet PHYs of this node.

|====


.Valid values for the MDI mode.
[#table-fmi3-ls-bus-ethernet-mdi-mode-values]
[cols="2,1,5"]
|====

h|Name h|Value h|Description
|[[table-fmi3-ls-bus-ethernet-mdi-mode-values-none]]NONE|0x0|Not applicable
|[[table-fmi3-ls-bus-ethernet-mdi-mode-values-mdi]]MDI|0x1|The MDI is wired in normal configuration.
|[[table-fmi3-ls-bus-ethernet-mdi-mode-values-mdi-x]]MDI_X|0x2|The MDI is wired in crossover configuration.
|[[table-fmi3-ls-bus-ethernet-mdi-mode-values-auto-mdi-x]]AUTO_MDI_X|0x3|The node supports auto MDI/MDI-X.

|====

====== Auto-Negotiation Base Page [[low-cut-ethernet-auto-negotatiation-base-page-operation]]
Represents the transmission of an auto-negotiation base page according to section 28 of <<IEEE-802.3-2022>>.

.Detailed description of the Auto-Negotiation Base Page operation.
[#table-fmi3-ls-bus-ethernet-auto-negotatiation-base-page-operation]
[cols="6,1,5,4,3,20"]
|====
h|Name 5+| Auto Negotatiation Base Page
h|Description 5+| Base page
h|OP Code [hex] 5+| 0x30
.21+h|Content 3+h|Argument h|Length h|Description


3+| OP Code
| 4 bytes
| Type of the operation.

3+| Length
| 4 bytes
| Total length of the operation.
The following applies for this operation: `Length = 17`.


3+| Selector
| 1 byte
| Selector field (5 bits for section 28)

3+| Technology ability
| 4 bytes
| Technology ability (7 bits for section 28)

3+| Extended next page
| 1 byte
| Indicates the support for extended next pages. (1 bit for section 28)

3+| Remote fault
| 1 byte
| Remote fault indicator. (1 bit for section 28)

3+| Ack
| 1 byte
| Acknowledgement. (1 bit for section 28) Reserved. Must be FALSE.

3+| Next page
| 1 byte
| Indicates the presence of a next page. (1 bit for section 28)

|====


====== Auto-Negotiation Message Page [[low-cut-ethernet-auto-negotatiation-message-page-operation]]
Represents the transmission of an auto-negotiation message page according to section 28 of <<IEEE-802.3-2022>>.

.Detailed description of the Auto-Negotiation Message Page operation.
[#table-fmi3-ls-bus-ethernet-auto-negotatiation-message-page-operation]
[cols="6,1,5,4,3,20"]
|====
h|Name 5+| Auto Negotatiation Message Page
h|Description 5+| Message page
h|OP Code [hex] 5+| 0x31
.21+h|Content 3+h|Argument h|Length h|Description


3+| OP Code
| 4 bytes
| Type of the operation.

3+| Length
| 4 bytes
| Total length of the operation.
The following applies for this operation: `Length = 15`.


3+| Message code
| 2 bytes
| Message code field (11 bits for section 28)

3+| Toggle
| 1 byte
| Toggle bit for synchronization. (1 bit for section 28) Reserved. Must be FALSE.

3+| Ack2
| 1 byte
| Acknowledgement 2. (1 bit for section 28) Reserved. Must be FALSE.

3+| Message page
| 1 byte
| Indicates a message page. (1 bit for section 28) Must be TRUE.

3+| Ack
| 1 byte
| Acknowledgement. (1 bit for section 28) Reserved. Must be FALSE.

3+| Next page
| 1 byte
| Indicates the presence of a next page. (1 bit for section 28)

|====


====== Auto-Negotiation Unformatted Page [[low-cut-ethernet-auto-negotatiation-unformatted-page-operation]]
Represents the transmission of an auto-negotiation message page according to section 28 of <<IEEE-802.3-2022>>.

.Detailed description of the Auto-Negotiation Unformatted Page operation.
[#table-fmi3-ls-bus-ethernet-auto-negotatiation-unformatted-page-operation]
[cols="6,1,5,4,3,20"]
|====
h|Name 5+| Auto Negotatiation Unformatted Page
h|Description 5+| Unformatted page
h|OP Code [hex] 5+| 0x32
.21+h|Content 3+h|Argument h|Length h|Description


3+| OP Code
| 4 bytes
| Type of the operation.

3+| Length
| 4 bytes
| Total length of the operation.
The following applies for this operation: `Length = 15`.


3+| Unformatted code
| 2 bytes
| Unformatted code field (11 bits for section 28)

3+| Toggle
| 1 byte
| Toggle bit for synchronization. (1 bit for section 28) Reserved. Must be FALSE.

3+| Ack2
| 1 byte
| Acknowledgement 2. (1 bit for section 28) Reserved. Must be FALSE.

3+| Message page
| 1 byte
| Indicates a message page. (1 bit for section 28) Must be FALSE.

3+| Ack
| 1 byte
| Acknowledgement. (1 bit for section 28) Reserved. Must be FALSE.

3+| Next page
| 1 byte
| Indicates the presence of a next page. (1 bit for section 28)

|====


====== Auto-Negotiation Extended Message Page [[low-cut-ethernet-auto-negotatiation-extended-message-page-operation]]
Represents the transmission of an auto-negotiation extended message page according to section 28 of <<IEEE-802.3-2022>>
or a message page according to section 98 of <<IEEE-802.3-2022>>.

.Detailed description of the Auto-Negotiation Extended Message Page operation.
[#table-fmi3-ls-bus-ethernet-auto-negotatiation-extended-message-page-operation]
[cols="6,1,5,4,3,20"]
|====
h|Name 5+| Auto Negotatiation Extended Message Page
h|Description 5+| Extended Message page (section 28) and message page (section 98)
h|OP Code [hex] 5+| 0x33
.21+h|Content 3+h|Argument h|Length h|Description


3+| OP Code
| 4 bytes
| Type of the operation.

3+| Length
| 4 bytes
| Total length of the operation.
The following applies for this operation: `Length = 17`.


3+| Message code
| 2 bytes
| Message code field (11 bits for section 28)

3+| Toggle
| 1 byte
| Toggle bit for synchronization. (1 bit for section 28) Reserved. Must be FALSE.

3+| Ack2
| 1 byte
| Acknowledgement 2. (1 bit for section 28) Reserved. Must be FALSE.

3+| Message page
| 1 byte
| Indicates a message page. (1 bit for section 28) Must be TRUE.

3+| Ack
| 1 byte
| Acknowledgement. (1 bit for section 28) Reserved. Must be FALSE.

3+| Next page
| 1 byte
| Indicates the presence of a next page. (1 bit for section 28)

3+| Unformatted code
| 2 bytes
| Unformatted code field (32 bit for section 28)

|====


====== Auto-Negotiation Extended Unformatted Page [[low-cut-ethernet-auto-negotatiation-extended-unformatted-page-operation]]
Represents the transmission of an auto-negotiation extended unformatted page according to section 28 of <<IEEE-802.3-2022>>
or an unformatted page according to section 98 of <<IEEE-802.3-2022>>.

.Detailed description of the Auto-Negotiation Extended Unformatted Page operation.
[#table-fmi3-ls-bus-ethernet-auto-negotatiation-extended-unformatted-page-operation]
[cols="6,1,5,4,3,20"]
|====
h|Name 5+| Auto Negotatiation Extended Unformatted Page
h|Description 5+| Extended Unformatted Page (section 28) and unformatted page (section 98)
h|OP Code [hex] 5+| 0x34
.21+h|Content 3+h|Argument h|Length h|Description


3+| OP Code
| 4 bytes
| Type of the operation.

3+| Length
| 4 bytes
| Total length of the operation.
The following applies for this operation: `Length = 17`.


3+| Unformatted code 1
| 2 bytes
| Unformatted code field 1 (11 bits for section 28)

3+| Toggle
| 1 byte
| Toggle bit for synchronization. (1 bit for section 28) Reserved. Must be FALSE.

3+| Ack2
| 1 byte
| Acknowledgement 2. (1 bit for section 28) Reserved. Must be FALSE.

3+| Message page
| 1 byte
| Indicates a message page. (1 bit for section 28) Must be FALSE.

3+| Ack
| 1 byte
| Acknowledgement. (1 bit for section 28) Reserved. Must be FALSE.

3+| Next page
| 1 byte
| Indicates the presence of a next page. (1 bit for section 28)

3+| Unformatted code 2
| 2 bytes
| Unformatted code field 2 (32 bit for section 28)

|====


====== Single Differential Pair Auto-Negotiation Base Page [[low-cut-ethernet-single-differential-pair-auto-negotatiation-base-page-operation]]
Represents the transmission of an auto-negotiation base page according to section 98 of <<IEEE-802.3-2022>>.

.Detailed description of the Single Differential Pair Auto-Negotiation Base Page operation.
[#table-fmi3-ls-bus-ethernet-single-differential-pair-auto-negotatiation-base-page-operation]
[cols="6,1,5,4,3,20"]
|====
h|Name 5+| Single Differential Pair Auto Negotatiation Base Page
h|Description 5+| Base page
h|OP Code [hex] 5+| 0x35
.21+h|Content 3+h|Argument h|Length h|Description


3+| OP Code
| 4 bytes
| Type of the operation.

3+| Length
| 4 bytes
| Total length of the operation.
The following applies for this operation: `Length = 21`.


3+| Selector
| 1 byte
| Selector field (5 bits for section 98)

3+| Echoed nonce
| 1 byte
| Echoed nonce (5 bits for section 98) Reserved. Must be zeros.

3+| Symmetric Pause capability indication
| 1 byte
| Symmetric Pause capability (2 bits for section 98) Bit 0

3+| Asymmetric Pause capability indication
| 1 byte
| Asymmetric Pause capability (2 bits for section 98) Bit 1

3+| Force master/slave
| 1 byte
| Force master/slave (1 bit for section 98)

3+| Remote fault
| 1 byte
| Indicates a remote fault. (1 bit for section 98)

3+| Ack
| 1 byte
| Acknowledgement. (1 bit for section 98) Reserved. Must be FALSE.

3+| Next page
| 1 byte
| Indicates the presence of a next page (1 bit for section 98)

3+| Transmitted nonce
| 1 byte
| Transmitted nonce (5 bits for section 98)

3+| Technology ability
| 4 bytes
| Technology ability (27 bits for section 98)

|====


====== Link State Indication [[low-cut-ethernet-link-state-indication-operation]]
Indicates the state of the physical medium attachment.

.Detailed description of the Link State Indication operation.
[#table-fmi3-ls-bus-ethernet-link-state-indication-operation]
[cols="6,1,5,4,3,20"]
|====
h|Name 5+| Link State Indication
h|Description 5+| Provides information to indicate link state.
h|OP Code [hex] 5+| 0x40
.21+h|Content 3+h|Argument h|Length h|Description


3+| OP Code
| 4 bytes
| Type of the operation.

3+| Length
| 4 bytes
| Total length of the operation.
The following applies for this operation: `Length = 74`.


3+| Physical medium attachment
| 64 bytes
| The currently used physical medium attachment as null-terminated string. Elements describing a PHY standarized by 802.3 or an amendment must use the value described in the chapter "30.3.2.1.2 aPhyType" of the standard. Otherwise, a vendor-defined value may be used.
If auto-negotiation is enabled but has not yet been performed, the value "unknown" should be used.

3+| Heartbeat
| 1 byte
| Indicates that the node is sending a regular normal link pulse or IDLE symbol.

3+| Master slave mode
| 1 byte
| Indicates whether the node is operating as MASTER or SLAVE.

|====

.Valid values for the master slave mode.
[#table-fmi3-ls-bus-ethernet-master-slave-mode-values]
[cols="2,1,5"]
|====

h|Name h|Value h|Description
|[[table-fmi3-ls-bus-ethernet-master-slave-mode-values-none]]NONE|0x0|Not applicable.
|[[table-fmi3-ls-bus-ethernet-master-slave-mode-values-master]]MASTER|0x1|Node is operating as MASTER.
|[[table-fmi3-ls-bus-ethernet-master-slave-mode-values-slave]]SLAVE|0x2|Node is operating as SLAVE.

|====

====== Wake Up [[low-cut-ethernet-wakeup-operation]]
Indicates wake up pulse according to TC10.

.Detailed description of the Wakeup operation.
[#table-fmi3-ls-bus-ethernet-wakeup-operation]
[cols="6,1,5,4,3,20"]
|====
h|Name 5+| Wakeup
h|Description 5+| Indicates a wakeup.
h|OP Code [hex] 5+| 0x50
.21+h|Content 3+h|Argument h|Length h|Description


3+| OP Code
| 4 bytes
| Type of the operation.

3+| Length
| 4 bytes
| Total length of the operation.
The following applies for this operation: `Length = 8`.


|====

