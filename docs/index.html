<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<link rel="icon" type="image/x-icon" href="images/favicon.ico">
<title>Network Communication and FMI 3.0, v1.0</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:30em;padding-right:0}
#toc.toc2{width:30em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote::before{display:none}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{word-spacing:0;line-height:1.6}
.quoteblock.abstract blockquote::before,.quoteblock.abstract p::before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}

/* customizations */

body{
  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
}

.toc-hidden {
  padding-left: 0 !important;
}

.imageblock {
  text-align: center;
}

.imageblock img {
  display: block;
  margin: auto;
}

.imageblock .title {
  display: inline-block;
  margin: auto;
}

.vertical-text {
	transform: rotate(-90deg) translate(-11em, 0);
	transform-origin: left top 0;
  float: left;
  display: inline-block;
  white-space: nowrap;
  width: 1em;
  height: 11em;
}

/* no alternating row colors */
table tr.even,table tr.alt,table tr:nth-of-type(even) {
  background:none
}

/* use parent text color for captions */
.subheader, .admonitionblock td.content>.title, .audioblock>.title, .exampleblock>.title, .imageblock>.title, .listingblock>.title, .literalblock>.title, .stemblock>.title, .openblock>.title, .paragraph>.title, .quoteblock>.title, table.tableblock>.title, .verseblock>.title, .videoblock>.title, .dlist>.title, .olist>.title, .ulist>.title, .qlist>.title, .hdlist>.title {
  color: inherit;
}

a {
  text-decoration: none;
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
<script>
// hide / show the Table of Contents (TOC)
function toggleTOC() {
  var toc = document.getElementById("toc");
  var body = document.getElementsByTagName("body")[0];

  if (toc.style.display === "none") {
      toc.style.display = "block";
      body.classList.remove("toc-hidden");
  } else {
      toc.style.display = "none";
      body.classList.add("toc-hidden");
  }
}

// toggle the TOC when "t" key is pressed
document.addEventListener('keydown', (event) => {
  if (event.key == 't') {
    toggleTOC();
  }
});
</script>

<!-- Generate a nice TOC -->
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js"></script>
<!-- We do not need the tocify CSS because the asciidoc CSS already provides most of what we neeed -->

<style>
.tocify-header {
    font-style: italic;
}

.tocify-subheader {
    font-style: normal;
    font-size: 90%;
}

.tocify ul {
    margin: 0;
 }

.tocify-focus {
    color: #7a2518;
    background-color: rgba(0, 0, 0, 0.1);
}

.tocify-focus > a {
    color: #7a2518;
}
</style>

<script type="text/javascript">
    $(function () {
        // Add a new container for the tocify toc into the existing toc so we can re-use its
        // styling
        $("#toc").append("<div id='generated-toc'></div>");
        $("#generated-toc").tocify({
            extendPage: true,
            context: "#content",
            highlightOnScroll: true,
            // don't hide the sections in the TOC
            showAndHide: false,
            hideEffect: "slideUp",
            // Use the IDs that asciidoc already provides so that TOC links and intra-document
            // links are the same. Anything else might confuse users when they create bookmarks.
            hashGenerator: function(text, element) {
                return $(element).attr("id");
            },
            // Smooth scrolling doesn't work properly if we use the asciidoc IDs
            smoothScroll: false,
            // Set to 'none' to use the tocify classes
            theme: "none",
            // Handle book (may contain h1) and article (only h2 deeper)
            selectors: $( "#content" ).has( "h1" ).size() > 0 ? "h1,h2,h3,h4,h5" : "h2,h3,h4,h5,h6",
            ignoreSelector: ".discrete"
        });

        // Switch between static asciidoc toc and dynamic tocify toc based on browser size
        // This is set to match the media selectors in the asciidoc CSS
        // Without this, we keep the dynamic toc even if it is moved from the side to preamble
        // position which will cause odd scrolling behavior
        var handleTocOnResize = function() {
            if ($(document).width() < 768) {
                $("#generated-toc").hide();
                $(".sectlevel0").show();
                $(".sectlevel1").show();
            }
            else {
                $("#generated-toc").show();
                $(".sectlevel0").hide();
                $(".sectlevel1").hide();
            }
        }

        $(window).resize(handleTocOnResize);
        handleTocOnResize();
    });
</script>

<img style="display: block; margin: 2em auto; width: 30em;" src="images/FMI_logo_horizontal.svg" alt="FMI logo">
</head>
<body class="book toc2 toc-left data-line-1">
<div id="header">
<h1>Network Communication and FMI 3.0, v1.0</h1>
<div id="toc" class="toc2">
<div id="toctitle">Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_intend_of_this_document">1.1. Intend of this Document</a></li>
<li><a href="#_basic_aspects_of_this_layered_standard">1.2. Basic Aspects of this Layered Standard</a></li>
</ul>
</li>
<li><a href="#_details">2. Details</a>
<ul class="sectlevel2">
<li><a href="#NetworkDescriptionFile">2.1. Network Description Files</a></li>
<li><a href="#_variables">2.2. Variables</a>
<ul class="sectlevel3">
<li><a href="#_signal_variables">2.2.1. Signal Variables</a></li>
<li><a href="#FrameVariable">2.2.2. Frame Variables</a></li>
<li><a href="#ClockVariable">2.2.3. Clock Variables</a></li>
</ul>
</li>
<li><a href="#_terminal_definitions">2.3. Terminal Definitions</a>
<ul class="sectlevel3">
<li><a href="#BUSTerminal">2.3.1. Bus Terminal</a></li>
<li><a href="#FrameTerminal">2.3.2. Frame Terminal</a></li>
<li><a href="#PDUTerminal">2.3.3. PDU Terminal</a></li>
<li><a href="#TerminalMemberVariable">2.3.4. Terminal Member Variable for Signals</a></li>
</ul>
</li>
<li><a href="#Example">2.4. Example</a></li>
<li><a href="#_known_limitations_of_this_standard">2.5. Known Limitations of this Standard</a></li>
</ul>
</li>
<li><a href="#_formal_semantics_of_a_network_configuration">Appendix A: Formal Semantics of a Network Configuration</a>
<ul class="sectlevel2">
<li><a href="#_introduction_2">A.1. Introduction</a></li>
<li><a href="#_vdm_sl_specifications">A.2. VDM-SL Specifications</a></li>
<li><a href="#_the_vdm_sl_network_description_type">A.3. The VDM-SL Network Description type</a></li>
<li><a href="#_rules">A.4. Rules</a>
<ul class="sectlevel3">
<li><a href="#rule_2.3.1a">A.4.1. Rule 2.3.1a</a></li>
<li><a href="#rule_2.3.1b">A.4.2. Rule 2.3.1b</a></li>
<li><a href="#rule_2.3.1c">A.4.3. Rule 2.3.1c</a></li>
<li><a href="#rule_2.3.2a">A.4.4. Rule 2.3.2a</a></li>
<li><a href="#rule_2.3.2b">A.4.5. Rule 2.3.2b</a></li>
<li><a href="#rule_2.3.2c">A.4.6. Rule 2.3.2c</a></li>
<li><a href="#rule_2.3.3a">A.4.7. Rule 2.3.3a</a></li>
<li><a href="#rule_2.3.3b">A.4.8. Rule 2.3.3b</a></li>
<li><a href="#rule_2.3.3c">A.4.9. Rule 2.3.3c</a></li>
<li><a href="#rule_2.3.4a">A.4.10. Rule 2.3.4a</a></li>
<li><a href="#rule_2.3.4b">A.4.11. Rule 2.3.4b</a></li>
<li><a href="#_network_description_validation">A.4.12. Network Description Validation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph data-line-18">
<p>This layered standard on top of FMI 3.0, defines how to describe and simulate network signals as input and output variables of an FMU.</p>
</div>
<div class="paragraph data-line-20">
<p><br>
</p>
</div>
<div class="paragraph data-line-23">
<p>Copyright &#169; 2021 The Modelica Association Project FMI.</p>
</div>
<div class="paragraph data-line-25">
<p>This document is licensed under the Attribution-ShareAlike 4.0 International license.
The code is released under the 2-Clause BSD License.
The licenses text can be found in the <a href="https://raw.githubusercontent.com/modelica/fmi-standard/master/LICENSE.txt" data-href="https://raw.githubusercontent.com/modelica/fmi-standard/master/LICENSE.txt">LICENSE.txt</a> file that accompanies this distribution.</p>
</div>
<div class="paragraph data-line-29">
<p></p>
</div>
</div>
</div>
<div class="sect1 data-line-31">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="sect2 data-line-33">
<h3 id="_intend_of_this_document">1.1. Intend of this Document</h3>
<div class="paragraph data-line-35">
<p>Automotive CAN, LIN, FlexRay, CAN FD and CAN XL are network technologies that have been applied successfully over many years by all automotive OEMs world wide.
Virtualizing electronic control units (ECUs) and then simulating multiple such vECUs requires connecting them using a virtual version of these network technologies.
Reusing standard network topology description formats, such as DBC, LDF, Fibex and ARXML, is required for efficiency and testing reasons alike.
Files in these formats exist in validated form as part of the engineering process, tooling exists and these standards evolve to support new use cases.</p>
</div>
<div class="paragraph data-line-40">
<p>This document describes how to use standard description formats for automotive network topologies on top of the FMI 3.0 standard.
vECUs following this standard can then easily be connected in importing tools because the <a href="#NetworkDescriptionFile">network description files</a> declare which signals have what properties and belong to what frame/PDU in which of the potentially multiple networks connected to each vECU.
The importer does not need to know about the special network semantics of certain variables of an FMU; it simply forwards variable values according to the FMI standard (<a href="#multiOutput">with one exception noted at the end of the document</a>).</p>
</div>
<div class="paragraph data-line-44">
<p>FMUs can extract frame and signal properties from the <a href="#NetworkDescriptionFile">network description files</a> and that allows all exporters and importers to have the same understanding and interpretation of the FMU signals.
Such signal properties are, for example: signal scaling, frame/PDU timing and trigger conditions, packaging of signals in frames and unit definitions.
This document does not address potential open points of these description formats, it is assumed that such ambiguities will be handled elsewhere (e.g. message timing in the DBC format).
This document does not address IP protection or copyright issues.
These are technical and legal issues that need attention from standardization bodies of the referenced description formats, tool vendors and end users.</p>
</div>
</div>
<div class="sect2 data-line-50">
<h3 id="_basic_aspects_of_this_layered_standard">1.2. Basic Aspects of this Layered Standard</h3>
<div class="paragraph data-line-52">
<p>This standard supports two abstraction layers for network stacks:</p>
</div>
<div class="dlist data-line-54">
<dl>
<dt class="hdlist1">Signal abstraction layer (also "high cut")</dt>
<dd>
<p>physical signals as exchanged between the application software (ASW) and the basic software (BSW), in AUTOSAR this would be the Virtual Function Bus, and</p>
</dd>
<dt class="hdlist1">Frame abstraction layer (also "low cut")</dt>
<dd>
<p>binary signal or signals representing one or more network frames as exchanged through the micro-controller abstraction layer (MCAL) between BSW and the hardware driver.</p>
</dd>
</dl>
</div>
<div class="paragraph data-line-58">
<p>Standardized <a href="#NetworkDescriptionFile">network description files</a> shipped with each FMU describe properties of signals and frames, such as signal units, frame composition and trigger conditions.
These <a href="#NetworkDescriptionFile">network description files</a> are placed into the <code>/extra/org.modelica.fmi.networks4FMI</code> folder.</p>
</div>
<div class="paragraph data-line-61">
<p>Both abstraction layers are nearly equivalent and can be translated into one another using the <a href="#NetworkDescriptionFile">network description files</a>.
Depending on the export tool, one of the abstraction layers is more "natural" to the FMU, while the other might have to be emulated with additional internal effort.
Importers on the other hand rarely require both abstraction layers for system level compositions, because the engineering task defines the level of abstraction for the network communication.
FMUs may choose to only support one abstraction layer providing only the corresponding variables.
However, for versatility, having FMU capable of communicating on both abstraction layers is more convenient for users.</p>
</div>
<div class="paragraph data-line-67">
<p><em>[FMUs providing both abstraction layers can deduce from the fmi3Set() and fmi3Get() calls they receive, which abstraction layer the importer is using.]</em></p>
</div>
<div class="paragraph data-line-69">
<p>Since network communication is not continuous but time discrete, FMI 3.0 clocks are used to indicate when signals and/or frames are sent.
All signal and frame variables are clocked variables.</p>
</div>
<div class="paragraph data-line-72">
<p>FMI 3.0 terminal definitions in the <code>terminalsAndIcons.xml</code> for each level of grouping (networks, frames and PDUs) allow system composition tools without knowledge of the network description format to semantically group signals.
To uniquely map between the FMU variables and the network variables, FMU variable names are structured, e.g. <code>BusName::FrameName::PDUName::SignalName</code>.</p>
</div>
<div class="paragraph data-line-75">
<p>If an FMU specifies nodes that are both senders and receivers of a frame, the receiver role will be removed from the FMU interface to allow the signals to have a unique role as output and the reading of such outputs must be handled internally to the FMU.
<em>[The FMI standard requires a variable to be either input or output.]</em></p>
</div>
</div>
</div>
</div>
<div class="sect1 data-line-78">
<h2 id="_details">2. Details</h2>
<div class="sectionbody">
<div class="sect2 data-line-80">
<h3 id="NetworkDescriptionFile">2.1. Network Description Files</h3>
<div class="paragraph data-line-82">
<p>FMI 3.0 introduces an <code>/extra</code> folder in its <code>zip</code> structure.
The <a href="#NetworkDescriptionFile">network description files</a> will be placed under the reverse domain name controlled by the MAP FMI: <code>/extra/org.modelica.fmi.networks4FMI</code>.
DBC, LDF, Fibex and ARXML files are allowed.
The root name of the <a href="#NetworkDescriptionFile">network description file</a> shall be used as network identifier in the bus terminal type and are case sensitive, e.g. <code>Powertrain.dbc</code>.</p>
</div>
<div class="paragraph data-line-87">
<p>Multiple files can be specified, each one defining one network used by the FMU.
This standard does not support composing one network from multiple <a href="#NetworkDescriptionFile">network description files</a>, even if using internal include mechanisms, it rather enforces the rule: one network - one file.</p>
</div>
<div class="paragraph data-line-90">
<p>It is recommended to use ARXML over DBC files for CAN whenever possible, because the DBC standard lacks some key frame/PDU properties that were added only later using non-standard extensions with different dialects in use.</p>
</div>
</div>
<div class="sect2 data-line-92">
<h3 id="_variables">2.2. Variables</h3>
<div class="paragraph data-line-94">
<p>This section explains the different variable types used to carry network traffic through FMI input and output variables.</p>
</div>
<div class="sect3 data-line-96">
<h4 id="_signal_variables">2.2.1. Signal Variables</h4>
<div class="paragraph data-line-98">
<p>To define the signal abstraction layer (or "high cut"), signal variables are defined.</p>
</div>
<div class="paragraph data-line-100">
<p>A signal variable carries the physical value of a network signal normally packaged inside a PDU or frame.
The unit definition of the variable must match the one defined in the <a href="#NetworkDescriptionFile">network description file</a>.</p>
</div>
<div class="paragraph data-line-103">
<p>Each network signal must be listed as <a href="#TerminalMemberVariable">Terminal Member Variable</a> of its corresponding <a href="#PDUTerminal">PDU terminal</a>.</p>
</div>
<div class="paragraph data-line-105">
<p>In case multiplexed signals are present in a frame/PDU: all signals are present, but only the active signal according to the multiplex switch signal contains a valid value, all inactive variables have undefined values <em>[those values could even be outside their specified min-max range without fault]</em>.</p>
</div>
<div class="paragraph data-line-107">
<p>Generally, signal variables are optional, but they must either be all missing or all present to clearly indicate support for the signal abstraction layer.</p>
</div>
</div>
<div class="sect3 data-line-109">
<h4 id="FrameVariable">2.2.2. Frame Variables</h4>
<div class="paragraph data-line-111">
<p>To define the frame abstraction layer (or "low cut"), frame variables are defined.</p>
</div>
<div class="paragraph data-line-113">
<p>A frame variable is of type <code>fmi3Binary</code> and contains one or more binary frames, from and including <code>Start of Frame</code> until and including <code>End of Frame</code> and frame padding between frames.
Frames and inter-frame padding are build according to the network definitions.</p>
</div>
<div class="paragraph data-line-116">
<p>There are two such frame variables per bus: an input and an output.
The names of these frame variables are defined as <code>BusName::FRAMES_in</code> and <code>BusName::FRAMES_out</code>, e.g. <code>Powertrain::FRAMES_in</code> and <code>Powertrain::FRAMES_out</code> (see <a href="#Example">Example</a>).</p>
</div>
<div class="paragraph data-line-119">
<p>Both frame variables must be listed as a <a href="#TerminalMemberVariable">Terminal Member Variable</a> of its corresponding <a href="#BUSTerminal">bus terminal</a>.</p>
</div>
<div class="paragraph data-line-121">
<p>Generally, frame variables are optional, but they must either both be missing or present to clearly indicate support for the frame abstraction layer.</p>
</div>
<div class="paragraph data-line-123">
<p>The senders of network frames can chose how many frames are buffered and/or for how long frames are buffered before activating an output clock to trigger the actual sending of these frames.
This allows senders to trade accuracy for speed: buffering more and interrupting the simulation less will lead to faster simulations, but less accurate timing of the bus communication.</p>
</div>
</div>
<div class="sect3 data-line-126">
<h4 id="ClockVariable">2.2.3. Clock Variables</h4>
<div class="paragraph data-line-128">
<p>In order to use FMU input and output variables as transport layer for networks, aperiodic, triggered input and output clocks are used.
Such a clock is activated by the sender to indicate the transmission of the corresponding frame or frames.</p>
</div>
<div class="paragraph data-line-131">
<p>Each frame <code>BusName::FrameName</code> has its own dedicated clock variable named <code>BusName::FrameName_CLOCK</code>, e.g. <code>POWERTRAIN::ecuState_CLOCK</code>, and must be listed as <a href="#TerminalMemberVariable">Terminal Member Variable</a> of its corresponding <a href="#FrameTerminal">frame terminal</a>.</p>
</div>
<div class="paragraph data-line-133">
<p>All signal variables are clocked variables.
Signal variables belonging to frame <code>BusName::FrameName</code> are triggered by the clock <code>BusName::FrameName_CLOCK</code> and all these variables must share the same <code>causality</code>.</p>
</div>
<div class="paragraph data-line-136">
<p>Each frame variable <code>BusName::FRAMES_in</code> and <code>BusName::FRAMES_out</code> have their own dedicated clock variable named <code>BusName::FRAMES_in_CLOCK</code> and <code>BusName::FRAMES_out_CLOCK</code>, e.g. <code>Powertrain::FRAMES_in_CLOCK</code> and <code>Powertrain::FRAMES_out_CLOCK</code>, respectively, must have the appropriate <code>causality</code>, and must be listed as <a href="#TerminalMemberVariable">Terminal Member Variable</a> of its corresponding <a href="#BUSTerminal">bus terminal</a>.</p>
</div>
</div>
</div>
<div class="sect2 data-line-140">
<h3 id="_terminal_definitions">2.3. Terminal Definitions</h3>
<div class="sect3 data-line-142">
<h4 id="BUSTerminal">2.3.1. Bus Terminal</h4>
<div class="paragraph data-line-144">
<p>Each network connected to the FMU must be described in <code>icons/terminalsAndIcons.xml</code> as a <code>&lt;Terminal&gt;</code> element of <code>&lt;fmiTerminalsAndIcons&gt;&lt;Terminals&gt;</code> that wraps all <a href="#FrameTerminal">frame terminals</a>.
The attribute <code>name</code> of the <code>&lt;Terminal&gt;</code> must match the root name of its <a href="#NetworkDescriptionFile">network description file</a> [<a href="#rule_2.3.1a">rule 2.3.1a</a>]<a id="apply_2.3.1a"></a>.
<em>[e.g. <code>Powertrain</code>, if the file is <code>/extra/org.modelica.fmi.layered_BUS/Powertrain.dbc</code>]</em>.</p>
</div>
<div class="dlist data-line-148">
<dl>
<dt class="hdlist1">Attribute definitions [<a href="#rule_2.3.1b">rule 2.3.1b</a>]<a id="apply_2.3.1b"></a></dt>
<dd>
<div class="ulist data-line-149">
<ul>
<li class="data-line-149">
<p><code>terminalKind</code> must be set to <code>bus</code>.</p>
</li>
<li class="data-line-150">
<p><code>matchingRule</code> must be set to <code>bus</code>.</p>
</li>
<li class="data-line-151">
<p><code>name</code> is the network name, e.g. <code>Powertrain</code>, see <a href="#Example">Example</a> and constraints above.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Element definitions [<a href="#rule_2.3.1c">rule 2.3.1c</a>]<a id="apply_2.3.1c"></a></dt>
<dd>
<div class="ulist data-line-154">
<ul>
<li class="data-line-154">
<p>If frame variables (<code>BusName::FRAMES_in</code> and <code>BusName::FRAMES_out</code>) and their clocks (<code>BusName::FRAMES_in_CLOCK</code> and <code>BusName::FRAMES_out_CLOCK</code>) are exposed in the <code>modelDescription.xml</code>, they must be listed as <code>&lt;TerminalMemberVariable&gt;</code> elements here.
These variables represent the frame abstraction layer ("low cut").</p>
</li>
<li class="data-line-156">
<p>There must be no <code>&lt;TerminalStreamMemberVariable&gt;</code> element.</p>
</li>
<li class="data-line-157">
<p>There must be one <code>&lt;Terminal&gt;</code> element per network frame described in the <a href="#NetworkDescriptionFile">network description file</a>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Annotation element</dt>
<dd>
<div class="ulist data-line-160">
<ul>
<li class="data-line-160">
<p>There must be an <code>&lt;Annotation&gt;</code> element defining which node or nodes (as comma-separated list without spaces) of the <a href="#NetworkDescriptionFile">network description file</a> are wrapped inside the FMU.
If the combination of nodes specified for this FMU turns a frame and its signals into both input and output because sending and receiving nodes are specified, only the sending (output) role will be defined in the FMU interface.
Receiving such frames must then be handled internally to the FMU.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3 data-line-164">
<h4 id="FrameTerminal">2.3.2. Frame Terminal</h4>
<div class="paragraph data-line-166">
<p>Each frame listed in the <a href="#NetworkDescriptionFile">network description file</a> must be an element of its corresponding <a href="#BUSTerminal">bus terminal</a> <a href="#rule_2.3.2a">rule 2.3.2a</a>]<a id="apply_2.3.2a"></a>.</p>
</div>
<div class="dlist data-line-168">
<dl>
<dt class="hdlist1">Attribute definitions [<a href="#rule_2.3.2b">rule 2.3.2b</a>]<a id="apply_2.3.2b"></a></dt>
<dd>
<div class="ulist data-line-169">
<ul>
<li class="data-line-169">
<p><code>terminalKind</code> must be set to <code>frame</code>.</p>
</li>
<li class="data-line-170">
<p><code>matchingRule</code> must be set to <code>bus</code>.</p>
</li>
<li class="data-line-171">
<p><code>name</code> must match the frame name as defined in the <a href="#NetworkDescriptionFile">network description file</a> in <code>/extra/org.modelica.fmi.layered_BUS</code>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Element definitions [<a href="#rule_2.3.2c">rule 2.3.2c</a>]<a id="apply_2.3.2c"></a></dt>
<dd>
<div class="ulist data-line-174">
<ul>
<li class="data-line-174">
<p>There must be no <code>&lt;TerminalStreamMemberVariable&gt;</code> element.</p>
</li>
<li class="data-line-175">
<p>There must be one <a href="#PDUTerminal">PDU terminal</a> element per PDU of this frame.</p>
</li>
<li class="data-line-176">
<p>There must be one <code>&lt;TerminalMemberVariable&gt;</code> for the clock this frame is connected to.
The name of this variable is composed as <a href="#ClockVariable"><code>BusName::FrameName_CLOCK</code></a>, e.g. <code>Powertrain::tcuSensors_CLOCK</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph data-line-179">
<p>The <a href="#TerminalMemberVariable">Terminal Member Variable</a> must have the same causality as all variables referenced in the <a href="#PDUTerminal">PDU Terminals</a> included here.</p>
</div>
</div>
<div class="sect3 data-line-181">
<h4 id="PDUTerminal">2.3.3. PDU Terminal</h4>
<div class="paragraph data-line-183">
<p>Each PDU listed in the <a href="#NetworkDescriptionFile">network description file</a> must be an element of its corresponding <a href="#FrameTerminal">frame terminal</a> [<a href="#rule_2.3.3a">rule 2.3.3a</a>]<a id="apply_2.3.3a"></a>.</p>
</div>
<div class="dlist data-line-185">
<dl>
<dt class="hdlist1">Attribute definitions [<a href="#rule_2.3.3b">rule 2.3.3b</a>]<a id="apply_2.3.3b"></a></dt>
<dd>
<div class="ulist data-line-186">
<ul>
<li class="data-line-186">
<p><code>terminalKind</code> must be set to <code>pdu</code>.</p>
</li>
<li class="data-line-187">
<p><code>matchingRule</code> must be set to <code>bus</code>.</p>
</li>
<li class="data-line-188">
<p><code>name</code> must match a PDU name of the <a href="#NetworkDescriptionFile">network description file</a> in <code>/extra/org.modelica.fmi.layered_BUS</code>.
For network types not natively referencing a "PDU", like CAN, a synthetic PDU with the same name as its frame is inserted.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Element definitions [<a href="#rule_2.3.3c">rule 2.3.3c</a>]<a id="apply_2.3.3c"></a></dt>
<dd>
<div class="ulist data-line-192">
<ul>
<li class="data-line-192">
<p>There must be no <code>&lt;TerminalStreamMemberVariable&gt;</code> element.</p>
</li>
<li class="data-line-193">
<p>There must be no <code>&lt;Terminal&gt;</code> element.</p>
</li>
<li class="data-line-194">
<p>There must be one <code>&lt;TerminalMemberVariable&gt;</code> per <a href="#TerminalMemberVariable">signal</a> of this PDU.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph data-line-196">
<p>All <a href="#TerminalMemberVariable"><code>TerminalMemberVariables</code></a> must have the same causality of either input or output.</p>
</div>
</div>
<div class="sect3 data-line-198">
<h4 id="TerminalMemberVariable">2.3.4. Terminal Member Variable for Signals</h4>
<div class="paragraph data-line-200">
<p><a href="#PDUTerminal">PDU terminals</a> list all the contained signals as <code>&lt;TerminalMemberVariable&gt;</code>. [<a href="#rule_2.3.4a">rule 2.3.4a</a>]<a id="apply_2.3.4a"></a></p>
</div>
<div class="dlist data-line-202">
<dl>
<dt class="hdlist1">Attribute definitions [<a href="#rule_2.3.4b">rule 2.3.4b</a>]<a id="apply_2.3.4b"></a></dt>
<dd>
<div class="ulist data-line-203">
<ul>
<li class="data-line-203">
<p><code>variableName</code> refers to the input or output variable name of the FMU and to enforce uniqueness is built as follows: <code>BusName::FrameName::PDUName::SignalName</code>, e.g. <code>Powertrain::tcuSensors::tcuSensors::vCar</code>.
These variables represent the signal abstraction layer ("high cut").</p>
</li>
<li class="data-line-205">
<p><code>memberName</code> is the <code>SignalName</code> as given in the <a href="#NetworkDescriptionFile">network description file</a>, e.g. <code>vCar</code>.
This is redundant information but simplifies signal name extraction.</p>
</li>
<li class="data-line-207">
<p><code>variableKind</code> is <code>signal</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2 data-line-209">
<h3 id="Example">2.4. Example</h3>
<div class="paragraph data-line-211">
<p>The following excerpts from files are used throughout this document as examples and should illustrate how the different concepts relate.</p>
</div>
<div class="paragraph data-line-213">
<p>The following partial DBC file lists merely the CAN message (frame) structure.
Signal trigger conditions are not included because they have no bearing on this standard.</p>
</div>
<div id="Powertrain" class="listingblock dbc data-line-219">
<div class="title">Example Powertrain.dbc file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C hljs" data-lang="C">...
BO_ 256 tcuSensors: 4 TCU
 SG_ vCar :          0|16@1- (32,0)  [-500|500] "km/h" ECU
 SG_ oilTemp :      16|9@1-  (2,50)  [-50|150]  "Grad C" ECU

BO_ 257 tcuState: 2 TCU
 SG_ state :         0|2@1+  (1,0)   [ 0|2] "-" ECU
 SG_ gear :          2|4@1-  (1,0)   [-2|6] "-" ECU
 SG_ targetGear :    6|4@1-  (1,0)   [-2|6] "-" ECU

BO_ 512 ecuState: 4 ECU
 SG_ accelPedal :    0|8@1+ (2,0)   [0|100]   "%" TCU
 SG_ k15 :           8|1@1+ (1,0)   [0|1]     "-" TCU
 SG_ oilTemp :       9|9@1- (2,50)  [-50|150] "Grad C" TCU
 SG_ radiatorTemp : 18|9@1- (2,50)  [-50|150] "Grad C" TCU
...</code></pre>
</div>
</div>
<div class="paragraph data-line-238">
<p>The <code>modelDescription.xml</code> excerpt listed below shows which variables would exist for the <code>Powertrain.dbc</code> shown above.</p>
</div>
<div id="modelDescription" class="listingblock xml data-line-0">
<div class="title">Example modelDescription.xml for ECU node</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-XML hljs" data-lang="XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;fmiModelDescription fmiVersion="3.0-alpha.7" modelName="Network4FMI"
    instantiationToken="Network4FMI"&gt;
  &lt;ModelVariables&gt;
    &lt;Clock   name="Powertrain::FRAMES_in_CLOCK"                  valueReference="1002"
        causality="input" variability="discrete" interval="triggered"/&gt;
    &lt;Binary  name="Powertrain::FRAMES_in"                        valueReference="1001"
        causality="input" variability="discrete" clocks="1002"/&gt;
    &lt;Clock   name="Powertrain::FRAMES_out_CLOCK"                 valueReference="1004"
        causality="output" variability="discrete" interval="triggered"/&gt;
    &lt;Binary  name="Powertrain::FRAMES_out"                       valueReference="1003"
        causality="output" variability="discrete" clocks="1004"/&gt;

    &lt;Clock   name="Powertrain::tcuSensors_CLOCK"                 valueReference="1007"
        causality="input" variability="discrete" interval="triggered"/&gt;
    &lt;Float64 name="Powertrain::tcuSensors::tcuSensors::vCar"     valueReference="1005"
        causality="input" variability="discrete" start="0"  clocks="1007"/&gt;
    &lt;Float64 name="Powertrain::tcuSensors::tcuSensors::oilTemp"  valueReference="1006"
        causality="input" variability="discrete" start="20" clocks="1007"/&gt;

    &lt;Clock   name="Powertrain::tcuState_CLOCK"                   valueReference="1011"
        causality="input" variability="discrete" interval="triggered"/&gt;
    &lt;Float64 name="Powertrain::tcuState::tcuState::state"        valueReference="1008"
        causality="input" variability="discrete" start="0" clocks="1011"/&gt;
    &lt;Float64 name="Powertrain::tcuState::tcuState::gear"         valueReference="1009"
        causality="input" variability="discrete" start="0" clocks="1011"/&gt;
    &lt;Float64 name="Powertrain::tcuState::tcuState::targetGear"   valueReference="1010"
        causality="input" variability="discrete" start="0" clocks="1011"/&gt;

    &lt;Clock   name="Powertrain::ecuState_CLOCK"                   valueReference="1016"
        causality="output" variability="discrete" interval="triggered"/&gt;
    &lt;Float64 name="Powertrain::ecuState::ecuState::accelPedal"   valueReference="1012"
        causality="output" variability="discrete" start="0" clocks="1016"/&gt;
    &lt;Float64 name="Powertrain::ecuState::ecuState::k15"          valueReference="1013"
        causality="output" variability="discrete" start="0" clocks="1016"/&gt;
    &lt;Float64 name="Powertrain::ecuState::ecuState::oilTemp"      valueReference="1014"
        causality="output" variability="discrete" start="0" clocks="1016"/&gt;
    &lt;Float64 name="Powertrain::ecuState::ecuState::radiatorTemp" valueReference="1015"
        causality="output" variability="discrete" start="0" clocks="1016"/&gt;
  &lt;/ModelVariables&gt;
  &lt;ModelStructure&gt;
  &lt;/ModelStructure&gt;
&lt;/fmiModelDescription&gt;</code></pre>
</div>
</div>
<div class="paragraph data-line-247">
<p>The following file shows the <code>&lt;Terminal&gt;</code> definition representing the network and frame structure defined with <code>Powertrain.dbc</code> above.</p>
</div>
<div id="terminalsAndIcon" class="listingblock xml data-line-0">
<div class="title">Example terminalsAndIcons.xml file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-XML hljs" data-lang="XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;fmiTerminalsAndIcons fmiVersion="3.0-alpha6"&gt;
  &lt;Terminals&gt;
    &lt;Terminal terminalKind="bus" name="Powertrain" matchingRule="bus"
        description="Powertrain CAN bus defined with dbc file"&gt;
      &lt;TerminalMemberVariable variableKind="signal"
        variableName="Powertrain::FRAMES_in_CLOCK" /&gt;
      &lt;TerminalMemberVariable variableKind="signal"
        variableName="Powertrain::FRAMES_in" /&gt;
      &lt;TerminalMemberVariable variableKind="signal"
        variableName="Powertrain::FRAMES_out_CLOCK" /&gt;
      &lt;TerminalMemberVariable variableKind="signal"
        variableName="Powertrain::FRAMES_out" /&gt;
      &lt;Terminal terminalKind="frame" name="tcuSensors" matchingRule="bus"&gt;
        &lt;TerminalMemberVariable variableKind="signal"
          variableName="Powertrain::tcuSensors_CLOCK" /&gt;
        &lt;Terminal terminalKind="pdu" name="tcuSensors" matchingRule="bus"&gt;
          &lt;TerminalMemberVariable variableKind="signal"
            variableName="Powertrain::tcuSensors::tcuSensors::vCar" memberName="vCar" /&gt;
          &lt;TerminalMemberVariable variableKind="signal"
            variableName="Powertrain::tcuSensors::tcuSensors::oilTemp" memberName="oilTemp" /&gt;
        &lt;/Terminal&gt;
      &lt;/Terminal&gt;
      &lt;Terminal terminalKind="frame" name="tcuState" matchingRule="bus"&gt;
        &lt;TerminalMemberVariable variableKind="signal"
          variableName="Powertrain::tcuState_CLOCK" /&gt;
        &lt;Terminal terminalKind="pdu" name="tcuState" matchingRule="bus"&gt;
          &lt;TerminalMemberVariable variableKind="signal"
            variableName="Powertrain::tcuState::tcuState::state" memberName="state" /&gt;
          &lt;TerminalMemberVariable variableKind="signal"
            variableName="Powertrain::tcuState::tcuState::gear" memberName="gear" /&gt;
          &lt;TerminalMemberVariable variableKind="signal"
            variableName="Powertrain::tcuState::tcuState::targetGear" memberName="targetGear" /&gt;
        &lt;/Terminal&gt;
      &lt;/Terminal&gt;
      &lt;Terminal terminalKind="frame" name="ecuState" matchingRule="bus"&gt;
        &lt;TerminalMemberVariable variableKind="signal"
          variableName="Powertrain::ecuState_CLOCK" /&gt;
        &lt;Terminal terminalKind="pdu" name="ecuState" matchingRule="bus"&gt;
          &lt;TerminalMemberVariable variableKind="signal"
            variableName="Powertrain::ecuState::ecuState::accelPedal" memberName="accelPedal" /&gt;
          &lt;TerminalMemberVariable variableKind="signal"
            variableName="Powertrain::ecuState::ecuState::k15" memberName="k15" /&gt;
          &lt;TerminalMemberVariable variableKind="signal"
            variableName="Powertrain::ecuState::ecuState::oilTemp" memberName="oilTemp" /&gt;
          &lt;TerminalMemberVariable variableKind="signal"
            variableName="Powertrain::ecuState::ecuState::radiatorTemp" memberName="radiatorTemp" /&gt;
        &lt;/Terminal&gt;
      &lt;/Terminal&gt;
      &lt;Annotations&gt;
        &lt;Annotation type="ECU" /&gt;
      &lt;/Annotations&gt;
    &lt;/Terminal&gt;
  &lt;/Terminals&gt;
&lt;/fmiTerminalsAndIcons&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2 data-line-256">
<h3 id="_known_limitations_of_this_standard">2.5. Known Limitations of this Standard</h3>
<div class="paragraph data-line-258">
<p>This layered standard maps several network protocols onto co-simulation variables as transport layer simulating in many ways an ideal network.
Such an ideal network differs from physical networks in the following ways (and potentially others):</p>
</div>
<div class="ulist data-line-261">
<ul>
<li class="data-line-261">
<p>Network frame arbitration: frames are sent on the wire according to network-specific priority rules.<br>
Here all frames are transmitted at the same time without delay.</p>
</li>
<li class="data-line-264">
<p>Network congestion/bandwidth: too many network frames sent for the bandwidth of the network.<br>
Here the network has infinite capacity.</p>
</li>
<li class="data-line-267">
<p>Protocol functions of higher levels: i.e. CAN request for retransmit is a specific protocol function.<br>
Here such specialties must be handled by the first layer inside the FMU.</p>
</li>
<li class="data-line-270">
<p>Incoming buffer overflow: when an ECU receives more frames than its buffer can hold.<br>
Here the FMU will receive all frames, regardless of buffer size.</p>
</li>
<li class="data-line-273">
<p>Network transmission errors: electrical errors which cause failed frame transmission.<br>
Here no such transmission errors can occur, unless explicitly added into the simulation.</p>
</li>
<li class="data-line-276">
<p><a id="multiOutput"></a>Network protocols allow frames to be sent from more than one node.<br>
Here this is also possible, with output variables for frames (and their signals) that are sent by more than one FMU.
This requires the importer to handle the case when multiple source FMUs are sending the same frame.
Importers must know how to handle this, just like they must know how to handle flow variables according to Kirchhoff&#8217;s law.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1 data-line-0">
<h2 id="_formal_semantics_of_a_network_configuration">Appendix A: Formal Semantics of a Network Configuration</h2>
<div class="sectionbody">
<div class="sect2 data-line-30">
<h3 id="_introduction_2">A.1. Introduction</h3>
<div class="paragraph data-line-32">
<p>This Network Communication Standard contains a complete description of how to define network signals as input and output variables within an FMU.</p>
</div>
<div class="paragraph data-line-34">
<p>This appendix defines formal rules that clarify the textual description in the Standard. The formal rules can be used to automatically test the compliance of an FMU with the Standard. Each rule contains links to places in the Standard where the rule is relevant. Similarly, links in the Standard refer to the rules given in this appendix.</p>
</div>
<div class="paragraph data-line-36">
<p>The rules only cover the <em>static</em> semantics of the Standard. That is, they describe the rules for correctly configured XML files, not the subsequent <em>dynamic</em> behaviour of the FMUs.</p>
</div>
</div>
<div class="sect2 data-line-38">
<h3 id="_vdm_sl_specifications">A.2. VDM-SL Specifications</h3>
<div class="paragraph data-line-40">
<p>The rules are defined in VDM-SL, the specification language of the <a href="https://en.wikipedia.org/wiki/Vienna_Development_Method" data-href="https://en.wikipedia.org/wiki/Vienna_Development_Method">Vienna Development Method</a>.  The language has a formal semantics, enabling proof of the properties of models to a high level of assurance. It also has an executable subset, so that real world data can be processed.</p>
</div>
<div class="paragraph data-line-42">
<p>Free <a href="https://github.com/overturetool/vdm-vscode" data-href="https://github.com/overturetool/vdm-vscode">open source tools</a> are available to process the VDM-SL rules, and <a href="https://github.com/INTO-CPS-Association/FMI-VDM-Model/releases" data-href="https://github.com/INTO-CPS-Association/FMI-VDM-Model/releases">check FMUs for compliance</a>.</p>
</div>
</div>
<div class="sect2 data-line-44">
<h3 id="_the_vdm_sl_network_description_type">A.3. The VDM-SL Network Description type</h3>
<div class="paragraph data-line-46">
<p>In order to define rules for a correctly configured XML files, the various formats of the <a href="#NetworkDescriptionFile">network description file</a> must be represented as a common VDM-SL record type. This type is an abstract representation of the aspects of the real network description that matter to the rules.</p>
</div>
<div class="listingblock data-line-48">
<div class="content">
<pre>types
	Name = seq1 of char
	NetworkDescription = set1 of Bus;

	Bus ::
		name	: Name
		frames	: set1 of Frame;

	Frame ::
		name	: Name
		pdus	: set1 of PDU;

	PDU ::
		name	: Name
		signals	: set1 of Signal;

	Signal ::
		name	: Name
		unit	: [Unit];</pre>
</div>
</div>
</div>
<div class="sect2 data-line-70">
<h3 id="_rules">A.4. Rules</h3>
<div class="sect3 data-line-79">
<h4 id="rule_2.3.1a">A.4.1. Rule 2.3.1a</h4>
<div class="paragraph data-line-80">
<p>Each network connected to the FMU must be described in <code>icons/terminalsAndIcons.xml</code> as a <code>&lt;Terminal&gt;</code> element of <code>&lt;fmiTerminalsAndIcons&gt;&lt;Terminals&gt;</code> that wraps all <a href="#FrameTerminal">frame terminals</a>. The attribute <code>name</code> of the <code>&lt;Terminal&gt;</code> must match the root name of its <a href="#NetworkDescriptionFile">network description file</a>.</p>
</div>
<div class="listingblock data-line-82">
<div class="content">
<pre>rule_231a: NetworkDescription * FmiTerminalsAndIcons +&gt; bool
rule_231a(nd, ti) == allOf
([
	-- @OnFail("Missing 'bus' Terminal for %s", bus.name)
	( exists terminal in seq ti.terminals &amp; terminal.name = bus.name )

	| bus in seq nd
]);</pre>
</div>
</div>
<div class="paragraph data-line-93">
<p>See [<a href="#apply_2.3.1a">Bus terminal</a>] <em>[In general, this can be a list of places where the rule is relevant]</em></p>
</div>
</div>
<div class="sect3 data-line-95">
<h4 id="rule_2.3.1b">A.4.2. Rule 2.3.1b</h4>
<div class="paragraph data-line-96">
<p>A bus terminal <code>terminalKind</code> must be set to <code>bus</code>, the <code>matchingRule</code> must be set to <code>bus</code> and the <code>name</code> is the network name, e.g. <code>Powertrain</code>.</p>
</div>
<div class="listingblock data-line-98">
<div class="content">
<pre>rule_231b: Bus * Terminal +&gt; bool
rule_231b(busDescription, busTerminal) == allOf
([
	-- @OnFail("Bus terminal must be terminalKind 'bus' at %s",
	-- loc2str(busTerminal.location))
	( busTerminal.terminalKind = "bus" ),

	-- @OnFail("Bus temrinal must have matchingRule 'bus' at %s")
	-- loc2str(busTerminal.location))
	( busTerminal.matchingRule = "bus" ),

	-- @OnFail("Bus %s does not match network description name %s at %s",
	-- busTerminal.name, busDescription.name, loc2str(busTerminal.location))
	( busTerminal.name = busDescription.name ),

	-- @OnFail("Bus has wrong number of frames at %s",
	-- loc2str(busTerminal.location))
	( busTerminal.terminal &lt;&gt; nil
		and len busTerminal.terminal = len busDescription.frames )
]);</pre>
</div>
</div>
<div class="paragraph data-line-121">
<p>See [<a href="#apply_2.3.1b">Bus attributes</a>]</p>
</div>
</div>
<div class="sect3 data-line-123">
<h4 id="rule_2.3.1c">A.4.3. Rule 2.3.1c</h4>
<div class="paragraph data-line-124">
<p>If frame variables (<code>BusName::FRAMES_in</code> and <code>BusName::FRAMES_out</code>) and their clocks (<code>BusName::FRAMES_in_CLOCK</code> and <code>BusName::FRAMES_out_CLOCK</code>) are exposed in the <code>modelDescription.xml</code>, they must be listed as <code>&lt;TerminalMemberVariable&gt;</code> elements here. There must be no <code>&lt;TerminalStreamMemberVariable&gt;</code> element.</p>
</div>
<div class="listingblock data-line-126">
<div class="content">
<pre>rule_231c: Bus * FmiModelDescription * Terminal +&gt; bool
rule_231c(busDescription, modelDescription, busTerminal) == allOf
([
	let variableName = busDescription.name ^ "::" ^ varName in
		-- @OnFail("Missing TerminalMemberVariable for %s", variableName)
		( lookup(modelDescription, variableName) &lt;&gt; nil =&gt;
			exists tmv in seq busTerminal.terminalMemberVariable &amp;
				tmv.variableName = variableName )

	| varName in seq
		[ "FRAMES_in", "FRAMES_out", "FRAMES_in_CLOCK", "FRAMES_out_CLOCK" ]
]
^
[
	-- @OnFail("TerminalStreamMemberVariables must be empty at %s",
	-- loc2str(busTerminal.location))
	( busTerminal.terminalStreamMemberVariable = nil )
]);</pre>
</div>
</div>
<div class="paragraph data-line-147">
<p>See [<a href="#apply_2.3.1c">Bus elements</a>]</p>
</div>
</div>
<div class="sect3 data-line-149">
<h4 id="rule_2.3.2a">A.4.4. Rule 2.3.2a</h4>
<div class="paragraph data-line-150">
<p><em>[Explanation here]</em>.</p>
</div>
<div class="listingblock data-line-153">
<div class="content">
<pre>rule_232a: Bus * Terminal +&gt; bool
rule_232a(busDesc, busTerminal) == allOf
([
	-- @OnFail("Missing 'frame' Terminal for %s", frame.name)
	( exists f in seq busTerminal.terminal &amp; f.name = frame.name )

	| frame in seq busDesc.frames
]);</pre>
</div>
</div>
<div class="paragraph data-line-164">
<p>See [<a href="#apply_2.3.2a">Frame terminal</a>]</p>
</div>
</div>
<div class="sect3 data-line-166">
<h4 id="rule_2.3.2b">A.4.5. Rule 2.3.2b</h4>
<div class="paragraph data-line-167">
<p><em>[Explanation here]</em>.</p>
</div>
<div class="listingblock data-line-170">
<div class="content">
<pre>rule_232b: Frame * Terminal +&gt; bool
rule_232b(frameDesc, frameTerminal) == allOf
([
	-- @OnFail("Frame terminal must be terminalKind 'frame' at %s",
	-- loc2str(frameTerminal.location))
	( frameTerminal.terminalKind = "frame" ),

	-- @OnFail("Frame temrinal must have matchingRule 'bus' at %s")
	-- loc2str(busTerminal.location))
	( frameTerminal.matchingRule = "bus" ),

	-- @OnFail("Frame %s does not match network description name %s at %s",
	-- frameTerminal.name, frameDesc.name, loc2str(frameTerminal.location))
	( frameTerminal.name = frameDesc.name )
]);</pre>
</div>
</div>
<div class="paragraph data-line-188">
<p>See [<a href="#apply_2.3.2b">Frame attributes</a>]</p>
</div>
</div>
<div class="sect3 data-line-190">
<h4 id="rule_2.3.2c">A.4.6. Rule 2.3.2c</h4>
<div class="paragraph data-line-191">
<p><em>[Explanation here]</em>.</p>
</div>
<div class="listingblock data-line-194">
<div class="content">
<pre>rule_232c: Bus * Frame * FmiModelDescription * Terminal +&gt; bool
rule_232c(busDesc, frameDesc, modelDesc, frameTerminal) == allOf
([
	let clockName = busDesc.name ^ "::" ^ frameDesc.name ^ "_CLOCK" in allOf
	([
		let var = lookup(modelDesc, clockName) in
			-- @OnFail("Missing ModelVariable for %s", clockName)
			( var &lt;&gt; nil )

			-- @OnFail("Variable is not of type Clock: %s", clockName)
			and ( is_Clock(var) ),

		-- @OnFail("Missing TerminalMemberVariable for %s", clockName)
		( exists tmv in seq frameTerminal.terminalMemberVariable &amp;
				tmv.variableName = clockName )
	]),

	-- @OnFail("TerminalStreamMemberVariables must be empty at %s",
	-- loc2str(frameTerminal.location))
	( frameTerminal.terminalStreamMemberVariable = nil ),

	-- @OnFail("Frame has wrong number of PDUs at %s",
	-- loc2str(frameTerminal.location))
	( frameTerminal.terminal &lt;&gt; nil
		and len frameTerminal.terminal = len frameDesc.pdus )
]);</pre>
</div>
</div>
<div class="paragraph data-line-223">
<p>See [<a href="#apply_2.3.2c">Frame elements</a>]</p>
</div>
</div>
<div class="sect3 data-line-226">
<h4 id="rule_2.3.3a">A.4.7. Rule 2.3.3a</h4>
<div class="paragraph data-line-227">
<p><em>[Explanation here]</em>.</p>
</div>
<div class="listingblock data-line-230">
<div class="content">
<pre>rule_233a: Frame * Terminal +&gt; bool
rule_233a(frameDesc, frameTerminal) == allOf
([
	-- @OnFail("Missing 'pdu' Terminal for %s", pdu.name)
	( exists p in seq frameTerminal.terminal &amp; p.name = pdu.name )

	| pdu in seq frameDesc.pdus
]);</pre>
</div>
</div>
<div class="paragraph data-line-241">
<p>See [<a href="#apply_2.3.3a">PDU terminal</a>]</p>
</div>
</div>
<div class="sect3 data-line-243">
<h4 id="rule_2.3.3b">A.4.8. Rule 2.3.3b</h4>
<div class="paragraph data-line-244">
<p><em>[Explanation here]</em>.</p>
</div>
<div class="listingblock data-line-247">
<div class="content">
<pre>rule_233b: PDU * Terminal +&gt; bool
rule_233b(pduDesc, pduTerminal) == allOf
([
	-- @OnFail("PDU terminal must be terminalKind 'frame' at %s",
	-- loc2str(pduTerminal.location))
	( pduTerminal.terminalKind = "pdu" ),

	-- @OnFail("PDU temrinal must have matchingRule 'bus' at %s")
	-- loc2str(pduTerminal.location))
	( pduTerminal.matchingRule = "bus" ),

	-- @OnFail("PDU %s does not match network description name %s at %s",
	-- pduTerminal.name, pduDesc.name, loc2str(pduTerminal.location))
	( pduTerminal.name = pduDesc.name )
]);</pre>
</div>
</div>
<div class="paragraph data-line-265">
<p>See [<a href="#apply_2.3.3b">PDU attributes</a>]</p>
</div>
</div>
<div class="sect3 data-line-267">
<h4 id="rule_2.3.3c">A.4.9. Rule 2.3.3c</h4>
<div class="paragraph data-line-268">
<p><em>[Explanation here]</em>.</p>
</div>
<div class="listingblock data-line-271">
<div class="content">
<pre>rule_233c: PDU * Terminal +&gt; bool
rule_233c(pduDesc, pduTerminal) == allOf
([
	-- @OnFail("TerminalStreamMemberVariables must be empty at %s",
	-- loc2str(pduTerminal.location))
	( pduTerminal.terminalStreamMemberVariable = nil ),

	-- @OnFail("PDU can have no Terminals at %s", loc2str(pduTerminal.location))
	( pduTerminal.terminal = nil ),

	-- @OnFail("PDU has wrong number of signals at %s",
	-- loc2str(pduTerminal.location))
	( pduTerminal.terminalMemberVariable &lt;&gt; nil
		and len pduTerminal.terminalMemberVariable = len pduDesc.signals )
]);</pre>
</div>
</div>
<div class="paragraph data-line-289">
<p>See [<a href="#apply_2.3.3c">PDU elements</a>]</p>
</div>
</div>
<div class="sect3 data-line-291">
<h4 id="rule_2.3.4a">A.4.10. Rule 2.3.4a</h4>
<div class="paragraph data-line-292">
<p><em>[Explanation here]</em>.</p>
</div>
<div class="listingblock data-line-295">
<div class="content">
<pre>rule_234a: PDU * Terminal +&gt; bool
rule_234a(pduDesc, pduTerminal) == allOf
([
	-- @OnFail("PDU has wrong number of signals at %s",
	-- loc2str(pduTerminal.location))
	( pduTerminal.terminalMemberVariable &lt;&gt; nil
		and len pduTerminal.terminalMemberVariable = len pduDesc.signals )
]);</pre>
</div>
</div>
<div class="paragraph data-line-306">
<p>See [<a href="#apply_2.3.4a">Signal variable</a>]</p>
</div>
</div>
<div class="sect3 data-line-308">
<h4 id="rule_2.3.4b">A.4.11. Rule 2.3.4b</h4>
<div class="paragraph data-line-309">
<p><em>[Explanation here]</em>.</p>
</div>
<div class="listingblock data-line-312">
<div class="content">
<pre>rule_234b: Signal * FmiModelDescription * TerminalMemberVariable +&gt; bool
rule_234b(signalDesc, modelDesc, signalVariable) == allOf
([
	-- @OnFail("Signal must be variableKind 'signal' at %s",
	-- loc2str(signalVariable.location))
	( signalVariable.variableKind = "signal" ),

	-- @OnFail("Signal memberName should be '%s' at %s",
	-- signalDesc.name, loc2str(signalVariable.location))
	( signalVariable.memberName = signalDesc.name ),

	let var = lookup(modelDesc, signalVariable.variableName) in
		-- @OnFail("Signal variable %s is not defined", signalVariable.variableName)
		(var &lt;&gt; nil)
]);</pre>
</div>
</div>
<div class="paragraph data-line-330">
<p>See [<a href="#apply_2.3.4b">Signal attributes</a>]</p>
</div>
</div>
<div class="sect3 data-line-332">
<h4 id="_network_description_validation">A.4.12. Network Description Validation</h4>
<div class="paragraph data-line-333">
<p>This section defines the complete validation of a <a href="#NetworkDescriptionFile">network description file</a> against a TerminalsAndIcons XML structure, using the basic rules defined above.</p>
</div>
<div class="listingblock data-line-336">
<div class="content">
<pre>networkValidation: NetworkDescription * FmiModelDescription * FmiTerminalsAndIcons +&gt; bool
networkValidation(networkDesc, modelDesc, terminalsAndIcons) == allOf
([
	rule_231a(networkDesc, terminalsAndIcons)
]
^
[
	let matching = {b | b in seq terminalsAndIcons.terminals &amp;
		b.name = busDesc.name }
	in
		-- @OnFail("Missing or duplicate bus terminal for %s", busDesc.name)
		( card matching = 1 )
			=&gt; let {busTerminal} = matching in
				busValidation(busDesc, modelDesc, busTerminal)

	| busDesc in seq networkDesc
]);

busValidation: Bus * FmiModelDescription * Terminal +&gt; bool
busValidation(busDesc, modelDesc, busTerminal) == allOf
([
	rule_231b(busDesc, busTerminal),
	rule_231c(busDesc, modelDesc, busTerminal),
	rule_232a(busDesc, busTerminal)
]
^
[
	let matching = {f | f in seq busTerminal.terminal &amp; f.name = frameDesc.name } in
		-- @OnFail("Missing or duplicate frame for %s", frameDesc.name)
		( card matching = 1 )
			=&gt; let {frameTerminal} = matching in
				frameValidation(busDesc, frameDesc, modelDesc, frameTerminal)

	| frameDesc in seq busDesc.frames
]);

frameValidation: Bus * Frame * FmiModelDescription * Terminal +&gt; bool
frameValidation(busDesc, frameDesc, modelDesc, frameTerminal) == allOf
([
	rule_232b(frameDesc, frameTerminal),
	rule_232c(busDesc, frameDesc, modelDesc, frameTerminal),
	rule_233a(frameDesc, frameTerminal)
]
^
[
	let matching = {p | p in seq frameTerminal.terminal &amp; p.name = pduDesc.name } in
		-- @OnFail("Missing or duplicate PDU for %s", pduDesc.name)
		( card matching = 1 )
			=&gt; let {pduTerminal} = matching in
				pduValidation(busDesc, frameDesc, pduDesc, modelDesc, pduTerminal)

	| pduDesc in seq frameDesc.pdus
]);

pduValidation: Bus * Frame * PDU * FmiModelDescription * Terminal +&gt; bool
pduValidation(busDesc, frameDesc, pduDesc, modelDesc, pduTerminal) == allOf
([
	rule_233b(pduDesc, pduTerminal),
	rule_233c(pduDesc, pduTerminal)
]
^
[
	let matching = {s | s in seq pduTerminal.terminalMemberVariable &amp;
		s.variableName =
			busDesc.name ^ "::" ^
			frameDesc.name ^ "::" ^
			pduDesc.name ^ "::" ^
			signalDesc.name}
	in
		-- @OnFail("Missing or duplicate TerminalMemberVariable for %s", signalDesc.name)
		( card matching = 1 )
			=&gt; let {signalVariable} = matching in
				signalValidation(signalDesc, modelDesc, signalVariable)

	| signalDesc in seq pduDesc.signals
]);

signalValidation: Signal * FmiModelDescription * TerminalMemberVariable +&gt; bool
signalValidation(signalDesc, modelDesc, signalVariable) == allOf
([
	-- @OnFail("Signal must be variableKind 'signal' at %s",
	-- loc2str(signalVariable.location))
	( signalVariable.variableKind = "signal" ),

	-- @OnFail("Signal memberName should be '%s' at %s",
	-- signalDesc.name, loc2str(signalVariable.location))
	( signalVariable.memberName = signalDesc.name ),

	let var = lookup(modelDesc, signalVariable.variableName) in
		-- @OnFail("Signal variable %s is not defined", signalVariable.variableName)
		(var &lt;&gt; nil)
]);</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>